# ${GITHUB_REPO_NAME}

${PROJECT_DESCRIPTION}

本项目采用 **GitHub + HuggingFace 双端存储** 方案：
- **大文件 (>50MB)**: 自动分流并托管至 [HuggingFace Datasets](https://huggingface.co/datasets/${HF_USERNAME}/${HF_REPO_NAME})
- **小文件与代码**: 保存在 GitHub 仓库
- **动态导航**: 通过 [GitHub Pages](https://${GITHUB_USERNAME}.github.io/${GITHUB_REPO_NAME}) 提供统一的搜索与下载界面

---

## 目录

${PROJECT_TOC}

---

## 快速开始

### 1. 环境准备

确保本地已安装 Python 3.8+ 及 Git。然后安装核心依赖：

```bash
pip install "huggingface_hub>=0.17.0"
```

### 2. 克隆与初始化

```bash
git clone https://github.com/${GITHUB_USERNAME}/${GITHUB_REPO_NAME}.git
cd ${GITHUB_REPO_NAME}
```

**一键配置：**
- **Windows**: 双击或运行 `setup.bat`
- **Linux/macOS**: 运行 `bash setup.sh`

> 该脚本将引导您完成 HuggingFace 认证、大文件首次分发及 Git 自动关联。

### 3. 配置 GitHub Actions (实现自动化)

在 GitHub 仓库设置中添加以下 Secrets：
路径：`Settings -> Secrets and variables -> Actions -> New repository secret`

| Secret 名称 | 描述 | 获取方式 |
| :--- | :--- | :--- |
| `HF_TOKEN` | HuggingFace 写入权限令牌 | [HF Tokens Settings](https://huggingface.co/settings/tokens) (创建 "Write" 权限的 Token) |

### 4. 开启 GitHub Pages

进入 `Settings -> Pages -> Build and deployment`，将 **Source** 设置为 **"GitHub Actions"**（不要选 "Deploy from a branch"）。

> 仓库已包含 `deploy-pages.yml` 静态部署 workflow 和 `.nojekyll` 文件，会自动绕过 Jekyll 构建，确保中文文件名正常访问。

部署完成后，您可以通过以下地址访问资源导航页：
`https://${GITHUB_USERNAME}.github.io/${GITHUB_REPO_NAME}`

---

## 项目结构

```
${GITHUB_REPO_NAME}/
├── scripts/distribute_files.py   # 核心分发引擎 (重试、日志、智能时间戳)
├── setup.bat / setup.sh          # 一键环境搭建 (同步、分发、提交、推送)
├── data/file_manifest.json       # 自动生成的文件元数据清单
├── index.html                    # 毛玻璃风格资源导航前端
├── .nojekyll                     # 绕过 Jekyll 构建
├── .github/workflows/
│   ├── distribute-files.yml      # HF 大文件同步 (只读模式)
│   └── deploy-pages.yml          # GitHub Pages 静态部署
└── ...                           # 项目内容目录
```

---

## 文件更新说明

### 添加大文件

1. 将文件放入仓库目录（>50MB 文件将自动转移至 HuggingFace）
2. 运行 `setup.bat`（Windows）或 `bash setup.sh`（Linux/macOS）
3. 脚本自动完成：
   - ✅ 上传至 HuggingFace
   - ✅ 更新 `.gitignore`（自动排除大文件）
   - ✅ 生成 `data/file_manifest.json`
   - ✅ 提交并推送至 GitHub

### 删除大文件

1. 本地删除文件：`rm your_large_file.bin`
2. 运行 `setup.bat` 或 `bash setup.sh`
3. 脚本自动处理：
   - ✅ 清理 `.gitignore` 中对应规则
   - ✅ 删除 HuggingFace 远程文件（404 容错）
   - ✅ 更新 manifest
   - ✅ 提交并推送

> 无需手动编辑 `.gitignore`，脚本全自动处理。

---

## 备用方案：Git LFS

如果 HuggingFace 不可用，可改用 Git LFS 管理大文件：

```bash
# 安装 Git LFS
git lfs install

# 追踪大文件类型
git lfs track "*.pdf"
git lfs track "*.zip"
git lfs track "*.tar.gz"
git lfs track "*.pptx"

# 提交 .gitattributes
git add .gitattributes
git commit -m "Configure Git LFS tracking"
```

> **注意**：GitHub 免费账户 Git LFS 配额为 1GB 存储 + 1GB/月带宽。超出需付费或使用 HuggingFace 方案。

---

## 常见问题

**Q: 文件没有出现在 GitHub Pages 中？**
- 检查文件是否已推送到 GitHub / HuggingFace
- 确认 GitHub Pages 已启用，且 `data/file_manifest.json` 已更新

**Q: HuggingFace 上传失败？**
- 运行 `huggingface-cli whoami` 验证登录
- 确保 `HF_TOKEN` 具有 "Write" 权限

**Q: 大文件下载很慢？**
- 国内用户可使用镜像：`huggingface-cli download ${HF_USERNAME}/${HF_REPO_NAME} --repo-type dataset --endpoint https://hf-mirror.com`

**Q: setup 脚本报错 "Filename too long"？**
- 运行 `git config core.longpaths true` 启用长路径支持
- 如果文件名包含特殊字符（如 `?`），在 `.gitignore` 中添加排除规则

---

## 许可证
本项目收集的资料仅供学习交流使用。
